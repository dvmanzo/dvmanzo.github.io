<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>

<style>
body {
	min-width:1400px;
	min-height:650px;
	text-align: center;
}
h1 {
text-align: center;
}
</style>

<body>
<h1>Introduction</h1>
<div align='right'><p align='right' style='width:700px; margin-right: 100px'>Having lived in New Jersey my entire life, I live about 20 minutes away from New
York City. I've been aware of "Stop and Frisk" since I can remember, but being a
white male have yet to be on the receiving end. Recently, Stop and Frisk has found
its way back into public discussion due to the Presidential debates and it's highly
controversial and sensitive subject. It was referred to as something that was no
longer in effect, which is not true. The subsequent discussion thereafter
demonstrated how most people are unaware of whether or not stop and frisk is
actually effective, what this practice yielded, and exactly how this activity ran and
still continues to run on a micro-scale even now.<br><br>The goal of this project is to highlight who is being targeted, where one is most likely
to be stopped, and shed light into what is resulting from an ideology that may or
may not be as effective as people would assume. As citizens of the United States, we are protected from search and
seizure without probable cause by the 4th Amendment of the Constitution. Stop and
frisk, much like the PATRIOT ACT, feeds into the fear and paranoia of suspecting
that anyone and everyone is likely breaking the law or plotting some attack that we
should be countering by signing away our rights and freedoms through constant
surveillance. The ideology that being able to search someone without cause is
completely unconstitutional. The PATRIOT ACT, as we recently found out thanks to
whistleblower Edward Snowden, is being abused as we are actively spying on every
citizen and recording all data transmissions regardless of whether or not they are
under investigation of criminal activity. Is stop and frisk another type of policy that
is overextending the reach of the law? If so, is it even effective in lowering the rate of
crime?</p></div>
<h1>Data</h1>
<div><select id="boroughSelect" onChange="changeOptions();">
<option value="ALL_BOROUGHS" selected>All</option>
<option value="Brooklyn">Brooklyn</option>
<option value="Bronx">The Bronx</option>
<option value="Manhattan">Manhattan</option>
<option value="SI">Staten Island</option>
<option value="Queens">Queens</option>
</select><select id="yearSelect" onChange="changeOptions();">
<option value="ALL_YEARS" selected>All</option>
<option value="YEAR_3">2003</option>
<option value="YEAR_4">2004</option>
<option value="YEAR_5">2005</option>
<option value="YEAR_6">2006</option>
<option value="YEAR_7">2007</option>
<option value="YEAR_8">2008</option>
<option value="YEAR_9">2009</option>
<option value="YEAR_10">2010</option>
<option value="YEAR_11">2011</option>
<option value="YEAR_12">2012</option>
<option value="YEAR_13">2013</option>
<option value="YEAR_14">2014</option>
<option value="YEAR_15">2015</option>
</select><select id="genderSelect" onChange="changeOptions();">
<option value="ALL_GENDERS" selected>All</option>
<option value="Male">Male</option>
<option value="Female">Female</option>
</select><select id="raceSelect" onChange="changeOptions();">
<option value="ALL_RACES" selected>All</option>
<option value="Asian">Asian</option>
<option value="Black">Black</option>
<option value="Black_Hispanic">Black Hispanic</option>
<option value="White_Hispanic">White Hispanic</option>
<option value="White">White</option>
</select></div>
<br>
<br>
<a style="cursor:pointer" onclick="showView('Race');">Stops by Race</a> | <a style="cursor:pointer" onclick="showView('Gender');">Stops by Gender</a> | <a style="cursor:pointer" onclick="showView('Year');">Stops by Year</a> | <a style="cursor:pointer" onclick="showView('Force');">Was force used?</a>
<br><svg id="svg1" width="800" height="1000"></svg>

</body>

<script>
  var currentBorough="ALL_BOROUGHS";
  var currentYear="ALL_YEARS";
  var currentRace="ALL_RACES";
  var currentGender="ALL_GENDERS";
  var currentView = "Gender";
  var boroughs=["Queens", "Brooklyn", "Bronx", "Manhattan", "SI"];
  var races=["Black", "White", "Black_Hispanic", "White_Hispanic", "Asian"];
  var gender=["Male", "Female"];
  var usedForce=["Force", "NonForce"];
  var dataPoint=[];
  var width=500;
  var height=400;
  var svg1 = d3.select("#svg1");
   var div1 = d3.select("body").append("div")	
   .attr("class", "tooltip")				
   .style("opacity", 0);
	  
  var x=0, maleCount=0, femaleCount=0, blackMaleCount=0, whiteMaleCount=0, asianMaleCount=0, whiteHispanicMaleCount=0, blackHispanicMaleCount=0, blackFemaleCount=0, whiteFemaleCount=0, asianFemaleCount=0, whiteHispanicFemaleCount=0, blackHispanicFemaleCount=0;
  function changeOptions()
  {
	  currentBorough=document.getElementById("boroughSelect").value;
	  currentYear=document.getElementById("yearSelect").value;
	  currentRace=document.getElementById("raceSelect").value;
	  currentGender=document.getElementById("genderSelect").value;
	  switch(currentView)
	  {
		  case "Gender":
		  	showGender();
			break;

		  case "Race":
		  	showRace();
			break;

		  case "Force":
		  	showForce();
			break;

		  case "Year":
		  	showYear();
			break;
	  }			  
  }
  function parseLine(data)
  {
	var tempClass="";
	tempClass="";
	tempClass=" ALL_RACES ALL_GENDERS ";
	if(data['sex']=="M")
	{
		tempClass+=" Male";
	}
	else if(data['sex']=="F")
	{
		tempClass+=" Female";
		if(data['race']=="B")
		{
			tempClass+=" Black";
		}
		else if(data['race']=="W")
		{
			tempClass+=" White";
		}
		else if(data['race']=="A")
		{
			tempClass+=" Asian";
		}
		else if(data['race']=="P")
		{
			tempClass+=" Black_Hispanic";
		}
		else if(data['race']=="Q")
		{
			tempClass+=" White_Hispanic";
		}
	}
		randomNumber=parseInt(Math.random()*5);
		tempClass+=" ALL_BOROUGHS "+boroughs[randomNumber];
		randomNumber=parseInt(Math.random()*2);
		tempClass+=" "+usedForce[randomNumber];
		randomNumber=parseInt(Math.random()*13);
		tempClass+=" ALL_YEARS YEAR_"+(randomNumber+3);
		  
		  
		svg1.append("circle").attr('class', tempClass).attr('cx', 1000).attr('cy', 1000).attr('r', 5).attr('fill', "steelblue").attr('opacity', 1).on("mouseover", function() {
			this.className.baseVal+=" highlighted";
									
		}).on("mouseout", function() {
				this.className.baseVal=this.className.baseVal.replace(" highlighted", "");
		});
  }
  
  
  visualize();
  /*d3.csv('2003.csv', function(err, d) {	
  d.forEach(function (data, i)
  {
	  x++;
	  parseLine(data);
  });
  console.log("M:" + maleCount);
  console.log("F:" + femaleCount);
  console.log("BM:" + blackMaleCount);
  console.log("WM:" + whiteMaleCount);
  console.log("AM:" + asianMaleCount);
  console.log("BHM:" + blackHispanicMaleCount);
  console.log("WHM:" + whiteHispanicMaleCount);
  console.log("BF:" + blackFemaleCount);
  console.log("WF:" + whiteFemaleCount);
  console.log("AF:" + asianFemaleCount);
  console.log("BHF:" + blackHispanicFemaleCount);
  console.log("WHF:" + whiteHispanicFemaleCount);
  visualize();
  });*/
  
  function visualize()
  {
		var tempClass="";
		var randomNumber=0;
	  for(var i=0; i<1000; i++)
	  {
		tempClass="";
		randomNumber=parseInt(Math.random()*5);
		tempClass=" ALL_RACES " + races[randomNumber];
		randomNumber=parseInt(Math.random()*5);
		tempClass+=" ALL_BOROUGHS "+boroughs[randomNumber];
		randomNumber=parseInt(Math.random()*2);
		tempClass+=" ALL_GENDERS "+gender[randomNumber];
		randomNumber=parseInt(Math.random()*2);
		tempClass+=" "+usedForce[randomNumber];
		randomNumber=parseInt(Math.random()*13);
		tempClass+=" ALL_YEARS YEAR_"+(randomNumber+3);
		  
		  
		svg1.append("circle").attr('class', tempClass).attr('cx', 1000).attr('cy', 1000).attr('r', 5).attr('fill', "steelblue").attr('opacity', 1).on("mouseover", function() {
			this.className.baseVal+=" highlighted";
									
		}).on("mouseout", function() {
				this.className.baseVal=this.className.baseVal.replace(" highlighted", "");
		});
  		//svg1.append("text").attr('class', 'count').attr("x", 0)
        //.attr("y", 45)
		//.attr("transform", "rotate(270, 200, 200)")
        //.text("White");
	  }
	  for(var i=0;i<13; i++)
	  {
		  svg1.append("text").attr('class', 'labels').attr("x", 1000).attr("y", 1000).attr("text-anchor", "middle").text("20"+(i>6?"":"0")+(3+i));
	  }
	  showView("Gender");
  }
  function showView(view)
  {
	  currentBorough="ALL_BOROUGHS";
	  currentYear="ALL_YEARS";
	  currentRace="ALL_RACES";
	  currentGender="ALL_GENDERS";
	  document.getElementById("boroughSelect").options.selectedIndex=0;
	  document.getElementById("genderSelect").options.selectedIndex=0;
	  document.getElementById("raceSelect").options.selectedIndex=0;
	  document.getElementById("yearSelect").options.selectedIndex=0;
	switch(view)
	{
		case "Gender":
			document.getElementById("boroughSelect").style.display="initial"; 
			document.getElementById("genderSelect").style.display="none"; 
			document.getElementById("raceSelect").style.display="initial"; 
			document.getElementById("yearSelect").style.display="initial"; 
			showGender();
			break;	
		case "Race":
			document.getElementById("boroughSelect").style.display="initial"; 
			document.getElementById("genderSelect").style.display="initial"; 
			document.getElementById("raceSelect").style.display="none"; 
			document.getElementById("yearSelect").style.display="initial"; 
			showRace();
			break;	
		case "Force":
			document.getElementById("boroughSelect").style.display="initial"; 
			document.getElementById("genderSelect").style.display="initial"; 
			document.getElementById("raceSelect").style.display="initial"; 
			document.getElementById("yearSelect").style.display="initial"; 
			showForce();
			break;	
		case "Year":
			document.getElementById("boroughSelect").style.display="initial"; 
			document.getElementById("genderSelect").style.display="initial"; 
			document.getElementById("raceSelect").style.display="initial"; 
			document.getElementById("yearSelect").style.display="none"; 
			showYear();
			break;	
		default:
			document.getElementById("boroughSelect").style.display="none"; 
			document.getElementById("genderSelect").style.display="none"; 
			document.getElementById("raceSelect").style.display="none"; 
			document.getElementById("yearSelect").style.display="none"; 
			showGender();
			break;	
	}
  }
  function showGender()
  {
	  currentView="Gender";
	  svg1.selectAll('.labels').each(function(d,i) {
			if(i==4)
			{
			  d3.select(this).transition()
			  	.delay(10*i)
				.duration(500)
				.attr("x", 250)
				.attr("y", 75)
				.text("Male");	
			}
			else if(i==5)
			{
			  d3.select(this).transition()
			  	.delay(10*i)
				.duration(500)
				.attr("x", 650)
				.attr("y", 75)
				.text("Female");	
			}
			else
			{	d3.select(this).transition()
			  	.delay(10*i)
				.duration(500)
				.attr("x", 1000)
				.attr("y", 1000);	
			}
		});
	    var x=0;
	  	svg1.selectAll('.Male').each(function(d,i) {			if(this.className.baseVal.indexOf(currentBorough)!=-1 && this.className.baseVal.indexOf(currentYear)!=-1 && this.className.baseVal.indexOf(currentRace)!=-1 && this.className.baseVal.indexOf(currentGender)!=-1)
{
			  d3.select(this).transition()			  	
				.delay(10*i)
				.duration(500)
				.attr("cx", 100+((x%20)*15))
				.attr("cy", 100+(parseInt((x/20))*15))
				.attr("opacity", 1.0);
				x++;	
			}
			else
			{
			  d3.select(this).transition()
			  	.delay(10*i)
				.duration(500)
				.attr("cx", 1000)
				.attr("cy", 1000)
				.attr("opacity", 1.0);	
			}
		});
		var x=0;
	  	svg1.selectAll('.Female').each(function(d,i) {			if(this.className.baseVal.indexOf(currentBorough)!=-1 && this.className.baseVal.indexOf(currentYear)!=-1 && this.className.baseVal.indexOf(currentRace)!=-1 && this.className.baseVal.indexOf(currentGender)!=-1)
{
			  d3.select(this).transition()			  	
			    .delay(10*i)
			  	.duration(500)
				.attr("cx", 500+((x%20)*15))
				.attr("cy", 100+(parseInt((x/20))*15))
				.attr("opacity", 1.0);	
				x++;		
			}
			else
			{
			  d3.select(this).transition()
			  	.delay(10*i)
				.duration(500)
				.attr("cx", 1000)
				.attr("cy", 1000)
				.attr("opacity", 1.0);	
			}
		});
  }

  function showRace()
  {
	  currentView="Race";
	  svg1.selectAll('.labels').each(function(d,i) {
			if(i<5)
			{
			  d3.select(this).transition()
			  	.delay(10*i)
				.duration(500)
				.attr("x", 165+((i%3)*200))
				.attr("y", 75+(parseInt((i/3))*400))
				.text(races[i]);	
			}
			else
			{	d3.select(this).transition()
			  	.delay(10*i)
				.duration(500)
				.attr("x", 1000)
				.attr("y", 1000);	
			}
		});
	  	  
	    var x=0;
	  	svg1.selectAll('.White').each(function(d,i) {
			if(this.className.baseVal.indexOf(currentBorough)!=-1 && this.className.baseVal.indexOf(currentYear)!=-1 && this.className.baseVal.indexOf(currentRace)!=-1 && this.className.baseVal.indexOf(currentGender)!=-1)
			{	
			  d3.select(this).transition()
			  	.delay(10*i)
				.duration(500)
				.attr("cx", 100+((x%10)*15))
				.attr("cy", 100+(parseInt((x/10))*15))
				.attr("opacity", 1.0);	
				x++;
			}
			else
			{
			  d3.select(this).transition()
			  	.delay(10*i)
				.duration(500)
				.attr("cx", 1000)
				.attr("cy", 1000)
				.attr("opacity", 1.0);	
			}
		});
		x=0;
	  	svg1.selectAll('.Black').each(function(d,i) {
			if(this.className.baseVal.indexOf(currentBorough)!=-1 && this.className.baseVal.indexOf(currentYear)!=-1 && this.className.baseVal.indexOf(currentRace)!=-1 && this.className.baseVal.indexOf(currentGender)!=-1)
			{	
			  d3.select(this).transition()			  	.delay(10*i)
.duration(500)
				.attr("cx", 300+((x%10)*15))
				.attr("cy", 100+(parseInt((x/10))*15))
				.attr("opacity", 1.0);
				x++;
			}
			else
			{
			  d3.select(this).transition()
			  	.delay(10*i)
				.duration(500)
				.attr("cx", 1000)
				.attr("cy", 1000)
				.attr("opacity", 1.0);	
			}
		});
		x=0;
	  	svg1.selectAll('.Asian').each(function(d,i) {
			if(this.className.baseVal.indexOf(currentBorough)!=-1 && this.className.baseVal.indexOf(currentYear)!=-1 && this.className.baseVal.indexOf(currentRace)!=-1 && this.className.baseVal.indexOf(currentGender)!=-1)
			{	
			  d3.select(this).transition()			  	.delay(10*i)
.duration(500)
				.attr("cx", 500+((x%10)*15))
				.attr("cy", 100+(parseInt((x/10))*15))
				.attr("opacity", 1.0);	
				x++;		   
			}
			else
			{
			  d3.select(this).transition()
			  	.delay(10*i)
				.duration(500)
				.attr("cx", 1000)
				.attr("cy", 1000)
				.attr("opacity", 1.0);	
			}
		});
		x=0;
	  	svg1.selectAll('.Black_Hispanic').each(function(d,i) {			
		if(this.className.baseVal.indexOf(currentBorough)!=-1 && this.className.baseVal.indexOf(currentYear)!=-1 && this.className.baseVal.indexOf(currentRace)!=-1 && this.className.baseVal.indexOf(currentGender)!=-1)
		{	
			  d3.select(this).transition()			  	.delay(10*i)
.duration(500)
				.attr("cx", 100+((x%10)*15))
				.attr("cy", 500+(parseInt((x/10))*15))
				.attr("opacity", 1.0);
				x++;			   
			}
			else
			{
			  d3.select(this).transition()
			  	.delay(10*i)
				.duration(500)
				.attr("cx", 1000)
				.attr("cy", 1000)
				.attr("opacity", 1.0);	
			}
		});
		x=0;
	  	svg1.selectAll('.White_Hispanic').each(function(d,i) {	
			if(this.className.baseVal.indexOf(currentBorough)!=-1 && this.className.baseVal.indexOf(currentYear)!=-1 && this.className.baseVal.indexOf(currentRace)!=-1 && this.className.baseVal.indexOf(currentGender)!=-1 && this.className.baseVal.indexOf(currentRace)!=-1 && this.className.baseVal.indexOf(currentGender)!=-1)
			{	
			  d3.select(this).transition()			  	.delay(10*i)
.duration(500)
				.attr("cx", 300+((x%10)*15))
				.attr("cy", 500+(parseInt((x/10))*15))
				.attr("opacity", 1.0);	
				x++;		   
			}
			else
			{
			  d3.select(this).transition()
			  	.delay(10*i)
				.duration(500)
				.attr("cx", 1000)
				.attr("cy", 1000)
				.attr("opacity", 1.0);	
			}
		});
  }
  function showYear()
  {
	  currentView="Year";
	  svg1.selectAll('.labels').each(function(d,i) {
			  d3.select(this).transition()
			  	.delay(10*i)
				.duration(500)
				.attr("x", 120+((i%4)*200))
				.attr("y", 80+(parseInt((i/4))*200))
				.text("20"+(i>6?"":"0")+(3+i));	
		});
	  	  
	    var x=0;
		for(var j=0; j<13; j++)
		{
		x=0;
	  	svg1.selectAll('.YEAR_'+(j+3)).each(function(d,i) {
			if(this.className.baseVal.indexOf(currentBorough)!=-1 && this.className.baseVal.indexOf(currentYear)!=-1 && this.className.baseVal.indexOf(currentRace)!=-1 && this.className.baseVal.indexOf(currentGender)!=-1)
			{	
			  d3.select(this).transition()
			  	.delay(10*i)
				.duration(500)
				.attr("cx", 50+(200*parseInt(j%4))+((x%10)*15))
				.attr("cy", 100+(200*parseInt(j/4))+(parseInt((x/10))*15))
				.attr("opacity", 1.0);	
				x++;
			}
			else
			{
			  d3.select(this).transition()
			  	.delay(10*i)
				.duration(500)
				.attr("cx", 1000)
				.attr("cy", 1000)
				.attr("opacity", 1.0);	
			}
		});
  	}
  }
  function showForce()
  {
	  currentView="Force";
	  svg1.selectAll('.labels').each(function(d,i) {
			if(i==4)
			{
			  d3.select(this).transition()
			  	.delay(10*i)
				.duration(500)
				.attr("x", 250)
				.attr("y", 75)
				.text("Force Used");	
			}
			else if(i==5)
			{
			  d3.select(this).transition()
			  	.delay(10*i)
				.duration(500)
				.attr("x", 650)
				.attr("y", 75)
				.text("Force Not Used");	
			}
			else
			{	d3.select(this).transition()
			  	.delay(10*i)
				.duration(500)
				.attr("x", 1000)
				.attr("y", 1000);	
			}
		});
	  	  
	    var x=0;
	  	svg1.selectAll('.Force').each(function(d,i) {
			if(this.className.baseVal.indexOf(currentBorough)!=-1 && this.className.baseVal.indexOf(currentYear)!=-1 && this.className.baseVal.indexOf(currentRace)!=-1 && this.className.baseVal.indexOf(currentGender)!=-1)
			{	
			  d3.select(this).transition()
			  	.delay(10*i)
				.duration(500)
				.attr("cx", 100+((x%20)*15))
				.attr("cy", 100+(parseInt((x/20))*15))
				.attr("opacity", 1.0);	
				x++;
			}
			else
			{
			  d3.select(this).transition()
			  	.delay(10*i)
				.duration(500)
				.attr("cx", 1000)
				.attr("cy", 1000)
				.attr("opacity", 1.0);	
			}
		});
		x=0;
	  	svg1.selectAll('.NonForce').each(function(d,i) {
			if(this.className.baseVal.indexOf(currentBorough)!=-1 && this.className.baseVal.indexOf(currentYear)!=-1 && this.className.baseVal.indexOf(currentRace)!=-1 && this.className.baseVal.indexOf(currentGender)!=-1)
			{	
			  d3.select(this).transition()			  	.delay(10*i)
.duration(500)
				.attr("cx", 500+((x%20)*15))
				.attr("cy", 100+(parseInt((x/20))*15))
				.attr("opacity", 1.0);
				x++;
			}
			else
			{
			  d3.select(this).transition()
			  	.delay(10*i)
				.duration(500)
				.attr("cx", 1000)
				.attr("cy", 1000)
				.attr("opacity", 1.0);	
			}
		});
  }
</script>